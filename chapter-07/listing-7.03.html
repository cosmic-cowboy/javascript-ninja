<!-- 第7章 正規表現 -->
<!-- 7.3 正規表現のコンパイル -->
<!-- chapter07：リスト7-3 実行時の正規表現をあとで使うためにコンパイル -->

<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="../scripts/assert.js" type="text/javascript"></script>
	<link href="../styles/assert.css" type="text/css" rel="stylesheet">

</head>
<body>

	<div class="samurai ninja"></div>
	<div class="ninja samurai"></div>
	<div></div>
	<span class="samurai ninja ronin"></span>

	<script>

		function findClassInElements (className, type) {

			// 指定のタグ要素を取得
			var elems = document.getElementsByTagName(type || "*");

			// クラス名を取得するための正規表現を作成
			var regex = new RegExp("(^|\\s)" + className + "(\\s|$)");

			var results = [];

			for (var i = 0;  i < elems.length; i++) {
				if(regex.test(elems[i].className)){
					results.push(elems[i]);
				}
			}

			return results;
		}

		assert(findClassInElements("ninja", "div").length === 2, "正しい数のdiv忍者を見つけた");

		assert(findClassInElements("ninja", "span").length === 1, "正しい数のspan忍者を見つけた");

		assert(findClassInElements("ninja").length === 3, "正しい数の忍者を見つけた");

	</script>
	
</body>
</html>

