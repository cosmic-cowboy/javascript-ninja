<!-- 第7章 正規表現 -->
<!-- 7.6 一般的な諸問題を正規表現で解決する -->
<!-- 7.6.1 文字列のトリミング -->
<!-- chapter07：リスト7-13 文字列の末尾をスライスするtrimメソッド -->

<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="../scripts/assert.js" type="text/javascript"></script>
	<link href="../styles/assert.css" type="text/css" rel="stylesheet">

</head>
<body>

	<script type="text/javascript">

		var str = "  #id div.class  ";
		var projectedResult = "#id div.class";
		var front_reg = /(^\s\s*)/;

		var trim = function (str) {
			var str = (str || "").replace(front_reg, "");
			var ws = /\s/;
			var i = str.length;

			// 文字列の最後から空白が続く限り、iを-1する
			while(ws.test(str.charAt(--i)));
			// ws.testがfalseになったとき、つまり文字列の最後から空白がなくなったとき
			// ws.testがfalseになったひとつ後の数でスライスをおこなう
			return str.slice(0, i + 1);
		}

		var result = trim(str);
		assert(result === projectedResult, "セレクタ文字列の余分な空白をトリミング（リスト7-13 文字列の末尾をスライスするtrimメソッド）：" + result);

	</script>
	
</body>
</html>

