<!-- 第6章 プロトタイプによるオブジェクト指向 -->
<!-- 6.2   落とし穴に注意 -->
<!-- 6.2.3 ネイティブオブジェクトを継承する -->
<!-- chapter06：リスト6-15 サブクラスによる本当の継承をしないで、Arrayの機能をシュミレートする -->

<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="../scripts/assert.js" type="text/javascript"></script>
	<link href="../styles/assert.css" type="text/css" rel="stylesheet">

</head>
<body>

	<script>
		function MyArray () {}

		MyArray.prototype.length = 0;

		(function () {
			var methods = ['push', 'pop', 'shift', 'unshift', 'slice', 'splice', 'join'];

				// 即時関数でクロージャのスコープによる混乱を回避する
				// 即時関数の引数にはメソッド名が入る
				(function(name){
					MyArray.prototype[name] = function(){
						return Array.prototype[name].apply(this, arguments);
					};
				})(methods[i]);
			};
		})()

		var mine = new MyArray();

		mine.push(1,2,3);

		assert(mine.length === 3, "全部の項目が我々の配列クラスに存在する");

		assert(!(mine instanceof Array), "ただし、Arrayを継承したわけではない");
	</script>
	
</body>
</html>

