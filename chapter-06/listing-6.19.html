<!-- 第6章 プロトタイプによるオブジェクト指向 -->
<!-- 6.2   落とし穴に注意 -->
<!-- 6.2.4 実体化の問題 -->
<!-- chapter06：リスト6-19 呼び出し側の問題を解決する -->

<!doctype html>

<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="../scripts/assert.js" type="text/javascript"></script>
	<link href="../styles/assert.css" type="text/css" rel="stylesheet">

</head>
<body>

	<script>

		// 間違った方法で呼び出されてたインスタンスを生成するようにする
		// なんかファクトリクラスみたい
		function User (first, last) {
			if(!(this instanceof arguments.callee)){
				return new User(first, last);
			}
			this.name = first + " " + last;
		}

		var name = "Rukia";

		var user = User("Ichigo", "Kurosaki");

		assert(name === "Rukia", "名前はRukia");	

		assert(user, "実体化された");

		assert(user.name === "Ichigo Kurosaki", "ユーザ名が正しく入力された");
			

	</script>
	
</body>
</html>

