<!-- chapter05：リスト5-5 Ajax要求のためにコールバックからクロージャを使う -->

<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="../scripts/assert.js" type="text/javascript"></script>
	<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
	<link href="../styles/assert.css" type="text/css" rel="stylesheet">

</head>
<body>
	<div id="testSubject"></div>
	<button id="testButton" type="button">Go!</button>
	<script>
		$("#testButton").click(function () {
			var elem$ = $("#testSubject");
			elem$.html("Loading ...");

			$.ajax({
				url : "test.html",
				success:function (html) {
					assert(elem$, "このコールバックはクロージャを介してelem$を参照できる");
					// なぜelem$にアクセスできるのか
					elem$.html("完了");
				}
			})
		})

	</script>
	
</body>
</html>